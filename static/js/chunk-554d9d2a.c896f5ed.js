(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-554d9d2a"],{"0073":function(t,e,a){"use strict";var n=a("11fa"),s=a.n(n);s.a},"050a":function(t,e,a){"use strict";var n=a("c46f"),s=a.n(n);s.a},"07d7":function(t,e,a){"use strict";var n=a("d33d"),s=a.n(n);s.a},"099d":function(t,e,a){"use strict";a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b");var n=a("85f2"),s=a.n(n),i=a("d847"),r=a.n(i),o=a("5e83"),l=a.n(o),u=a("268f"),c=a.n(u),d=a("e265"),h=a.n(d),f=a("a4bb"),p=a.n(f),m=a("284c"),v=a("2fa7"),g=a("c1df"),y=a.n(g),b=a("2f62");function _(t,e){var a=p()(t);if(h.a){var n=h()(t);e&&(n=n.filter((function(e){return c()(t,e).enumerable}))),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):l.a?r()(t,l()(a)):_(Object(a)).forEach((function(e){s()(t,e,c()(a,e))}))}return t}e["a"]={data:function(){return{defaultSite:void 0,selectData:{code:"",name:"",type:"",month:y()().subtract(1,"month").format("YYYY-MM"),date:y()().format("YYYY-MM-DD")},minDate:y()().subtract(180,"days").toDate(),maxDate:y()().subtract(1,"days").toDate(),disableTabs:[1],penaltyMaxDate:y()().month(y()().month()-1).startOf("month").toDate()}},created:function(){this.parseRouterParams()},computed:C({},Object(b["d"])("user",["userInfo"])),filters:{FORMAT_TIME:function(t){return y()(t).format("YYYY-MM-DD HH:mm:ss")}},methods:C(C({},Object(b["b"])("workbench",["setSelectedList"])),{},{onChangeTime:function(){this.refresh()},onChangeSite:function(t,e,a){this.selectData.code=e.code,this.selectData.name=e.name,this.selectData.type=e.type,this.setSelectedList(Object(m["a"])(a)),this.refresh()},parseRouterParams:function(){this.$route.query.date&&(this.selectData.date=this.$route.query.date),this.$route.query.month&&(this.selectData.month=this.$route.query.month),this.$route.query.code&&this.$route.query.type?this.defaultSite={code:this.$route.query.code,name:this.$route.query.name,type:Number(this.$route.query.type),options:this.$route.query.options?this.$route.query.options.split(",").map((function(t){var e=t.split("|");return{code:e[0],name:e[1],type:Number(e[2])}})):[]}:this.userInfo.authCode?this.defaultSite={code:this.userInfo.authCode,name:this.userInfo.authName,type:this.userInfo.authType}:this.defaultSite={code:this.userInfo.siteCode,name:this.userInfo.siteName,type:3}}})}},"11fa":function(t,e,a){},"1ed2":function(t,e,a){},2238:function(t,e,a){"use strict";var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-pull-refresh",{staticClass:"card",attrs:{disabled:t.disabeldLoading},on:{refresh:t.onRefresh},model:{value:t.refreshLoading,callback:function(e){t.refreshLoading=e},expression:"refreshLoading"}},[t._t("header"),!t.refreshLoading&&t.loading?a("div",{staticClass:"loading"},[a("van-loading",{attrs:{type:"spinner"}})],1):t._e(),!t.loading&&t.empty?a("div",{staticClass:"empty"},[a("img",{attrs:{src:"/static/images/ic_empty.png",alt:""}}),a("span",[t._v(t._s(t.emptyTip))])]):t._e(),a("div",{staticClass:"card-body",class:t.empty||t.loading?"hide":"show"},[t._t("default")],2)],2)},i=[],r=(a("b0c0"),a("2fa7")),o=(a("ac1e"),a("543e")),l=(a("2b28"),a("9ed2")),u=(a("342a"),a("1437")),c=(a("5d17"),a("f9bd")),d={components:(n={},Object(r["a"])(n,c["a"].name,c["a"]),Object(r["a"])(n,u["a"].name,u["a"]),Object(r["a"])(n,l["a"].name,l["a"]),Object(r["a"])(n,o["a"].name,o["a"]),n),model:{prop:"collapse",event:"change"},props:{empty:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyTip:{type:String,default:"暂无数据"}},data:function(){return{disabeldLoading:!1,refreshLoading:!1}},computed:{},mounted:function(){},methods:{onRefresh:function(){var t=this;this.$emit("refresh"),setTimeout((function(){t.refreshLoading=!1}),1e3)}}},h=d,f=(a("42ff"),a("2877")),p=Object(f["a"])(h,s,i,!1,null,"23c32275",null);e["a"]=p.exports},"2ea2":function(t,e,a){},"42ff":function(t,e,a){"use strict";var n=a("8357"),s=a.n(n);s.a},"70fa":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAoCAYAAAAsYdCDAAAAAXNSR0IArs4c6QAAAKBJREFUOE9jDOr49l+Un5HBSImZwd2QmUFelIkBHTB6Nn37DxNkYmRg8DZhYUhxZWVgZUYoRVEEE9ZXYGJoimKHK8SqCKTY15SFIdODFawPpyKQ1VPT2cFuxKkIZEKAOQtDmhsrfkVyoowMMzI48CviZGNgWFvOiV8RyMpttaOKRoNgNBXQMyMQlTmJyuYECwyiih6ChRje4hBnwUpMEQ0AnaOfiSX3Z0YAAAAASUVORK5CYII="},8357:function(t,e,a){},"851b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panelTittle"},[a("div",{staticClass:"leftPart"},[t._m(0),a("div",{staticClass:"titleText"},[t._v(t._s(t.tittle))])]),a("div",[t._t("rightSlot")],2)])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panelImg"},[n("img",{attrs:{src:a("70fa"),alt:""}})])}],i={props:{tittle:{type:String,default:""}}},r=i,o=(a("07d7"),a("2877")),l=Object(o["a"])(r,n,s,!1,null,"08b99db6",null);e["a"]=l.exports},"868f":function(t,e,a){"use strict";var n=a("2ea2"),s=a.n(n);s.a},"8e3a":function(t,e,a){},"8eeb5":function(t,e,a){},9358:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("b-select-site",{ref:"selectSite",attrs:{defaultData:t.defaultSite},on:{change:t.onChangeSite},model:{value:t.selectData.code,callback:function(e){t.$set(t.selectData,"code",e)},expression:"selectData.code"}}),t.updateTimeList.length>0?a("div",{staticClass:"p_right"},[t._v(" 更新于"+t._s(t._f("FORMAT_TIME")(t.updateTimeList[2].updateTime))+" ")]):t._e()],1),a("div",{staticClass:"header_back"}),a("Card",{staticClass:"network-manage",attrs:{empty:t.empty,loading:t.loading},on:{refresh:t.refresh}},[!t.empty&&t.data?[a("div",{staticClass:"data-detail"},[a("panel-tittle",{attrs:{tittle:(new Date).getFullYear()+"业务量目标"},scopedSlots:t._u([{key:"rightSlot",fn:function(){return[a("span",{staticClass:"a-title"},[t._v("单位：万票")])]},proxy:!0}],null,!1,2015667173)}),t.data.areaBusinessTargetVo?a("Progress",{attrs:{data:t.data.areaBusinessTargetVo}}):t._e(),t.data.areaBusinessVolumeVoList&&t.data.areaBusinessVolumeVoList.length?a("div",{staticClass:"detail"},[a("TargetItem",{attrs:{data:t.data.areaBusinessVolumeVoList[0],type:t.type,title:"已完成量",desc:"应完成量","show-target":""}}),a("TargetItem",{attrs:{data:t.data.areaBusinessVolumeVoList[1],type:t.type,title:"累计完成量"}}),a("TargetItem",{attrs:{data:t.data.areaBusinessVolumeVoList[2],type:t.type,title:"累计完成量",desc:"应完成量","show-target":""}}),a("TargetItem",{attrs:{data:t.data.areaBusinessVolumeVoList[3],type:t.type,title:"完成量","show-target":"",desc:"剩余每天应完成量"}})],1):t._e(),t.data.areaBusinessVolumeRiskVoList&&t.data.areaBusinessVolumeRiskVoList.length?a("CompleteItem",{attrs:{"value-color":"#FF6383",list:t.notCompleteList,type:0}}):t._e(),t.data.areaBusinessVolumeRiskVoList&&t.data.areaBusinessVolumeRiskVoList.length?a("CompleteItem",{attrs:{"value-color":"#FF9F40",list:t.fxList,type:1}}):t._e()],1),"网点"!==t.type&&t.data.areaBusinessMonthTargetVoList?a("MonthList",{attrs:{type:t.tableType,data:t.data.areaBusinessMonthTargetVoList}}):t._e(),a("YearList",{attrs:{type:t.tableType,data:t.data.areaBusinessYearTargetVoList}})]:t._e()],2)],1)},s=[],i=(a("4de4"),a("4160"),a("caad"),a("d3b7"),a("2532"),a("159b"),a("85f2")),r=a.n(i),o=a("d847"),l=a.n(o),u=a("5e83"),c=a.n(u),d=a("268f"),h=a.n(d),f=a("e265"),p=a.n(f),m=a("a4bb"),v=a.n(m),g=a("795b"),y=a.n(g),b=a("967e"),_=a.n(b),C=(a("96cf"),a("2fa7")),w=a("51be"),x=a("b775");function T(t){return Object(x["a"])({url:"".concat(w["a"],"/areaBusiness/getAreaBusinessVolume"),method:"POST",data:t})}var k=a("2f62"),S=a("2238"),M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data?a("div",{staticClass:"progress"},[a("div",{staticClass:"title"},[t._v(" 年度目标完成情况 (年已完成量/年目标量) ")]),a("div",{staticClass:"bar"},[a("div",{staticClass:"bar-thumb",style:"width:"+t.progress+"%"},[t._v(t._s(t.progress)+"%")]),t.q1?a("div",{staticClass:"data q1",style:"left:"+t.q1+"%"}):t._e(),t.q2?a("div",{staticClass:"data q2",style:"left:"+t.q2+"%"}):t._e(),t.q3?a("div",{staticClass:"data q3",style:"left:"+t.q3+"%"}):t._e(),t.q4?a("div",{staticClass:"data q4",style:"left:"+t.q4+"%"}):t._e(),a("div",{staticClass:"vaule"},[t._v(t._s(t._f("FORMAT_NUMBER_4")(t.current))+" / "+t._s(t._f("FORMAT_NUMBER_4")(t.target)))])])]):t._e()},L=[],O=(a("b680"),{components:{},props:{data:{type:Object,default:function(){}}},data:function(){return{order:null}},computed:{target:function(){return this.data.targetNum},current:function(){return this.data.achieveNum},progress:function(){if(!this.data.achieveNum)return 0;if(!this.data.targetNum)return 0;var t=(this.data.achieveNum/this.data.targetNum*100).toFixed(0);return t=Math.min(t,100),t=Math.max(t,0),t},q1:function(){if(!this.data.seasonOne)return 0;var t=(this.data.seasonOne/this.data.targetNum*100).toFixed(2);return t=Math.min(t,100),t=Math.max(t,0),t},q2:function(){if(!this.data.seasonTwo)return 0;var t=((this.data.seasonTwo+this.data.seasonOne)/this.data.targetNum*100).toFixed(2);return t=Math.min(t,100),t=Math.max(t,0),t},q3:function(){if(!this.data.seasonThree)return 0;var t=((this.data.seasonThree+this.data.seasonTwo+this.data.seasonOne)/this.data.targetNum*100).toFixed(2);return t=Math.min(t,100),t=Math.max(t,0),t},q4:function(){if(!this.data.seasonFour)return 0;var t=((this.data.seasonFour+this.data.seasonThree+this.data.seasonTwo+this.data.seasonOne)/this.data.targetNum*100).toFixed(2);return t=Math.min(t,100),t=Math.max(t,0),t}},mounted:function(){},methods:{onSelect:function(t){}}}),D=O,A=(a("dba2"),a("2877")),N=Object(A["a"])(D,M,L,!1,null,"a2752ba4",null),B=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"target-item"},[a("div",{staticClass:"title"},[a("span",{staticClass:"name"},[t._v(" "+t._s(t.data.dataLable)+" "+t._s(t.title)+" ")]),1===t.data.status&&3!==t.data.type?a("span",{staticClass:"tag fx",class:1===t.data.type?"nowc":"fx"},[t._v(" "+t._s(1===t.data.type?"未完成":"有风险")+" ")]):t._e(),1===t.data.status&&3!==t.data.type?a("img",{staticClass:"tag-question",attrs:{src:"/static/images/icon_question.png",alt:""},on:{click:t.onClickStatus}}):t._e()]),a("div",{staticClass:"value"},[t._v(t._s(t._f("FORMAT_NUMBER_4")(t.data.achieveNum)))]),t.desc?a("div",{staticClass:"desc"},[t._v(" "+t._s(t.desc)+" "),t.showTarget?a("span",{staticClass:"number"},[t._v(t._s(t.target))]):t._e(),t.showTarget?a("span",[t._v(t._s(t.descUnit))]):t._e()]):t._e(),a("van-dialog",{attrs:{className:"dialog1",title:t.dialogTitle,message:t.dialogMessage,confirmButtonText:"我知道了"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}})],1)},V=[],E=a("bf9c"),R={components:{},props:{data:{type:Object,default:function(){}},type:{type:String,default:""},title:{type:String,default:""},desc:{type:String,default:""},showTarget:{type:Boolean,default:!1}},data:function(){return{showDialog:!1,dialogTitle:"",dialogMessage:""}},computed:{target:function(){return this.data?3===this.data.type?(this.data.dailyAverage,Object(E["b"])(this.data.dailyAverage)):Object(E["b"])(this.data.targetNum):0},descUnit:function(){return this.data&&3===this.data.type?this.data.dailyAverage>1e4?"万/天":"票/天":""}},mounted:function(){},methods:{onClickStatus:function(){var t="",e="";0===this.data.type?(t="年累计有风险说明",e="计算方法为：年累计完成量 < 年累计目标量"):1===this.data.type?(t="T-1月累计未完成说明",e="计算方法为：T-1月累计完成量 < T-1月累计目标量"):2===this.data.type&&(t="月累计有风险说明",e="计算方法为：月累计完成量 < 月累计目标量量"),this.dialogTitle=t,this.dialogMessage=e,this.showDialog=!0}}},j=R,Y=(a("0073"),Object(A["a"])(j,F,V,!1,null,"2701c8a9",null)),q=Y.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"complete-item"},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.list[0].dataLable)+" "),a("img",{staticClass:"name-question",attrs:{src:"/static/images/icon_question.png",alt:""},on:{click:t.onClickStatus}})]),a("div",{staticClass:"list"},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"value",style:"color: "+t.valueColor},[t._v(" "+t._s(e.riskNumber)+" ")]),a("div",{staticClass:"name"},[t._v(t._s(0===t.type?"未完成":"有风险")+t._s(t._f("formatType")(e.type)))])])})),0),a("van-dialog",{attrs:{className:"dialog1",title:t.dialogTitle,message:t.dialogMessage,confirmButtonText:"我知道了"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}})],1)},I=[],U=(a("b0c0"),a("a9e3"),a("e17f"),a("2241")),z=a("c1df"),P=a.n(z),W={components:Object(C["a"])({},U["a"].name,U["a"]),filters:{formatType:function(t){var e={0:"中心",1:"网格",2:"网点"};return e[t]}},props:{type:{type:Number,default:0},list:{type:Array,default:function(){return[]}},valueColor:{type:String,default:"#FF6383"}},data:function(){return{currentYear:P()().format("YYYY"),showDialog:!1,dialogTitle:"",dialogMessage:""}},computed:{},mounted:function(){},methods:{onClickStatus:function(){var t="",e="";this.list[0].dataLable.includes("未完成")?(t="T-1月次数累计未完成说明",e="计算方法为：T-1月有出现未按目标量完成计1次，累计次数之和"):(t="月累计有风险说明",e="计算方法为：月累计完成量 < 月累计目标量，累计次数之和"),this.dialogTitle=t,this.dialogMessage=e,this.showDialog=!0}}},G=W,H=(a("050a"),Object(A["a"])(G,$,I,!1,null,"6b193a93",null)),K=H.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},["本网点"===t.type?a("panel-tittle",{attrs:{tittle:"月目标完成情况(TOP10):"},scopedSlots:t._u([{key:"rightSlot",fn:function(){return[a("div",{staticClass:"right"},[a("i",{staticClass:"color"}),a("span",[t._v("未完成")])])]},proxy:!0}],null,!1,4201390301)}):a("panel-tittle",{attrs:{tittle:"各"+t.type+"年目标完成情况"},scopedSlots:t._u([{key:"rightSlot",fn:function(){return[a("div",{staticClass:"right"},[a("i",{staticClass:"color"}),a("span",[t._v("未完成")])])]},proxy:!0}])}),"本网点"===t.type&&t.minData.length&&t.minData[0].monthTargetVoList?a("bar-chart-line",{attrs:{data:t._f("formatBarChartLineData")(t.minData[0].monthTargetVoList),color:t.chartColorConfig,labelType:"cat",height:156,labelTickCount:8,avgLable:"月平均完成率",avgValue:t.minData[0].completionRate}}):a("div",{staticStyle:{"overflow-y":"scroll"},on:{touchmove:function(t){t.stopPropagation()}}},[a("x-table",{attrs:{isSetWidth:"",data:t.isMore?t.data:t.minData,"expand-row-keys":[0]}},[a("x-table-column",{attrs:{label:t.type,prop:"a",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.name&&e.row.code?a("a",{on:{click:function(a){return t.onClickJump(e.row,e.$index)}}},[t._v(" "+t._s(e.row.name)+" ")]):a("span",[t._v("其他")])]}}])}),a("x-table-column",{attrs:{label:t.currentYear+"年度目标(万票)",prop:"targetTotalNum",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FORMAT_NUMBER_4")(e.row.targetTotalNum)))])]}}])}),a("x-table-column",{attrs:{label:"年已完成量(万票)",prop:"achieveTotalNum",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FORMAT_NUMBER_4")(e.row.achieveTotalNum)))])]}}])}),"中心"===t.type?a("x-table-column",{attrs:{label:t.currentMonth+"月未完成网格(个)",prop:"riskGrid",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.riskGrid?"wrong1":""},[t._v(t._s(e.row.riskGrid))])]}}],null,!1,2219599631)}):t._e(),"中心"===t.type||"网格"===t.type||"网点"===t.type?a("x-table-column",{attrs:{label:t.currentMonth+"月未完成网点(个)",prop:"riskSite",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.riskSite?"wrong1":""},[t._v(t._s(e.row.riskSite))])]}}],null,!1,578154479)}):t._e(),a("x-table-column",{attrs:{label:"未完成月",prop:"undoneMonth",width:"中心"===t.type?30:60},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.undoneMonth?"wrong1":""},[t._v(t._s(e.row.undoneMonth))])]}}])}),a("x-table-column",{attrs:{label:"详情",width:"30",type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bar-chart-line",{attrs:{data:t._f("formatBarChartLineData")(e.row.monthTargetVoList),color:t.chartColorConfig,labelType:"cat",height:156,labelTickCount:8,avgLable:"月平均完成率",avgValue:e.row.completionRate}})]}}])})],1)],1),!t.isMore&&t.data.length>10?a("div",{staticClass:"more",on:{click:function(e){t.isMore=!0}}},[t._v(" 查看更多 "),a("van-icon",{staticClass:"icon",attrs:{name:"arrow-down"}})],1):t._e(),t.isMore?a("div",{staticClass:"more",on:{click:function(e){t.isMore=!1}}},[t._v(" 点击收起 "),a("van-icon",{staticClass:"icon",attrs:{name:"arrow-up"}})],1):t._e()],1)},J=[],Q=(a("99af"),a("a15b"),a("d81d"),a("fb6a"),a("328e")),X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar-chart"},[a("canvas",{ref:"canvas"}),a("div",{ref:"tooltip",staticClass:"f2-tooltip"})])},tt=[],et=(a("cb29"),a("7db0"),a("59ad")),at=a.n(et),nt=a("8a75"),st=a.n(nt),it={components:{},props:{data:{type:Array,default:function(){return[]}},color:{type:Array,default:function(){return[]}},type:{type:String,default:"dodge"},defaultBarColor:{type:String,default:"#ff0000"},valueFormatter:{type:Function,default:function(t){var e=String(t).length;return e>8?"".concat(t/1e8,"亿"):e>4?"".concat(t/1e4,"万"):t}},labelFormatter:{type:Function,default:function(t){return t}},labelType:{type:String,default:"timeCat"},labelTickCount:{type:Number,default:0},labelRange:{type:Array,default:function(){return[.05,.95]}},height:{type:Number,default:300},unit:{type:String,default:"万"},avgLable:{type:String,default:"平均值"},avgValue:{type:Number,default:25}},data:function(){return{chart:null,xAxis:[],unitCount:0,unitText:"票",unitGuide:null}},computed:{},watch:{data:{handler:function(){this.updateData()}}},activated:function(){},mounted:function(){this.render(),window.addEventListener("resize",this.resize),this.Event.$on("refreshChart",this.updateData)},destroyed:function(){window.removeEventListener("resize",this.resize),this.Event.$off("refreshChart",this.updateData),this.chart&&(this.chart.destroy(),this.chart=null)},methods:{updateData:function(){return _.a.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.a.awrap(this.$nextTick());case 2:0!==this.$el.clientWidth&&(this.chart.clear(),this.render(),this.resize());case 3:case"end":return t.stop()}}),null,this,null,y.a)},resize:function(){this.chart&&this.chart.changeSize(this.$el.clientWidth,this.$el.clientHeight)},px2hd:function(t){var e=at()(document.documentElement.style.fontSize,10)||100,a=e/37.5;return Number((t*a).toFixed(1))},calcUnitCount:function(){var t=this;this.data.filter((function(t){return Object.prototype.hasOwnProperty.call(t,"value")})).forEach((function(e){e.value>1e8?t.unitCount=2:e.value>1e4&&(t.unitCount=1)})),this.unitText=2===this.unitCount?"(亿票)":1===this.unitCount?"(万票)":"(票)"},render:function(){var t=this;this.calcUnitCount();var e=new st.a.Chart({el:this.$refs.canvas,pixelRatio:window.devicePixelRatio,padding:[this.px2hd(60),this.px2hd(40),this.px2hd(30),this.px2hd(40)],height:this.px2hd(this.height)});this.data&&this.data.length>0&&e.source(this.data),e.axis("label",{labelOffset:15,label:function(e,a,n){var s={textAlign:"center",fontSize:t.px2hd(10),textBaseline:"middle"};return e.includes("hide_")?s.text="-":e&&e.length>4?s.text="".concat(e.substr(0,2),"\n").concat(e.substr(2,2),"..."):e&&e.length>2?s.text="".concat(e.substr(0,2),"\n").concat(e.substr(2,e.length)):s.text=e.substr(0,2),s}}),e.axis("value2",{verticalLimitLength:this.px2hd(40),label:function(e){var a={autoEllipsis:!0,autoRotate:!1,fontSize:t.px2hd(12),text:"".concat(e,"%")};return a}}),e.axis("value",{offsetX:0,verticalLimitLength:this.px2hd(40),label:function(e){var a={autoEllipsis:!0,autoRotate:!1,fontSize:t.px2hd(12),text:"".concat(2===t.unitCount?(e/1e8).toFixed(0):1===t.unitCount?(e/1e4).toFixed(0):e)};return a}}),e.scale({value2:{ticks:[0,25,50,75,100]},value:{},label:{type:this.labelType,formatter:this.labelFormatter}}),e.legend({custom:!0,clickable:!1,position:"top",offsetX:this.px2hd(45),showTitle:!0,nameStyle:{fontSize:this.px2hd(11)},itemWidth:this.px2hd(62),items:this.color.map((function(e){var a={name:e.type,marker:{symbol:"square",fill:e.color,fontSize:t.px2hd(5)}};return"line"===e.marker&&(a.marker=function(t,a,n,s){s.lineWidth=1,s.strokeStyle=e.color,s.moveTo(t-n-3,a),s.lineTo(t+n+3,a),s.stroke(),s.fill()}),a}))}),e.interval().position("label*value").color("type",(function(e){var a=t.color.find((function(t){return e===t.type}));return a?a.color:t.defaultBarColor})).size(this.px2hd(8)).adjust({type:this.type,marginRatio:.81}),e.line().position("label*value2").color("type",(function(e){var a=t.color.find((function(t){return e===t.type}));return a?a.color:t.defaultBarColor})),this.unitGuide=e.guide().text({position:["min","max"],content:this.unitText,style:{textBaseline:"middle",textAlign:"center",fontSize:this.px2hd(11)},offsetY:-15}),e.guide().line({top:!0,start:function(e,a){var n=a[1].max-a[1].min,s=t.avgValue/n*100;return["0%","".concat(100-s,"%")]},end:function(e,a){var n=a[1].max-a[1].min,s=t.avgValue/n*100;return["100%","".concat(100-s,"%")]},style:{stroke:"#a1a1a1",lineWidth:1,lineCap:"round"}}),e.guide().text({position:function(e,a){var n=a[1].max-a[1].min,s=t.avgValue/n*100;return["100%","".concat(100-s,"%")]},top:!0,content:"".concat(this.avgLable,"： ").concat(this.avgValue,"%"),offsetY:-10,style:{fill:"#a1a1a1",textAlign:"end",textBaseline:"bottom",fontWeight:"bold",fontSize:this.px2hd(11)}}),e.tooltip({custom:!0,showCrosshairs:!1,showTooltipMarker:!1,triggerOn:["touchstart","touchmove","click"],onChange:function(e){var a=t.$refs.tooltip,n=e.items[0].title;n.includes("hide_")&&(n="-");for(var s=a.childNodes.length-1;s>=0;s--)a.removeChild(a.childNodes[s]);var i=document.createElement("div");i.innerHTML=n,a.appendChild(i);for(var r=0;r<e.items.length;r++){var o=e.items[r],l=document.createElement("div"),u=document.createElement("span");u.className="name",u.innerHTML="".concat(o.name),l.appendChild(u);var c=document.createElement("span");c.className="value",c.innerHTML=o.name.includes("率")?"".concat(o.value,"%"):"".concat(Object(E["a"])(o.value)),l.appendChild(c),a.appendChild(l)}var d=e.items[0].x-a.clientWidth/2;d=Math.max(d,0),d=Math.min(d,t.$refs.canvas.clientWidth),a.style.opacity=1,a.style.left="".concat(d,"px")},onHide:function(){var e=t.$refs.tooltip;e.style.opacity=0}}),0!==this.$el.clientWidth&&e.render(),this.chart=e}}},rt=it,ot=(a("ed36"),Object(A["a"])(rt,X,tt,!1,null,"6200d079",null)),lt=ot.exports,ut=a("851b");function ct(t,e){var a=v()(t);if(p.a){var n=p()(t);e&&(n=n.filter((function(e){return h()(t,e).enumerable}))),a.push.apply(a,n)}return a}function dt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(a),!0).forEach((function(e){Object(C["a"])(t,e,a[e])})):c.a?l()(t,c()(a)):ct(Object(a)).forEach((function(e){r()(t,e,h()(a,e))}))}return t}var ht={components:{BarChartLine:lt,panelTittle:ut["a"]},filters:{formatBarChartLineData:function(t){for(var e=[],a=0;a<8;a++)if(t&&t.length>a){var n=t[a];e.push({label:"".concat(n.month,"月"),value:n.targetNum,type:"年目标"}),e.push({label:"".concat(n.month,"月"),value:n.achieveNum||0,type:"年已完成量"}),e.push({label:"".concat(n.month,"月"),value2:n.completionRate||0,type:"完成率"})}else e.push({label:"hide_".concat(a),value:0,type:"年目标"}),e.push({label:"hide_".concat(a),value:0,type:"年已完成量"});return e}},props:{type:{type:String,default:""},data:{type:Array,default:function(){return[]}}},data:function(){return{isMore:!1,currentYear:P()().format("YYYY"),currentMonth:"1-".concat(P()().subtract(1,"months").month()+1),avgValue:0,chartColorConfig:[{type:"年目标",color:"#75A0FF",marker:"square"},{type:"年已完成量",color:"#FFB559",marker:"square"},{type:"完成率",color:"#3693FF",marker:"line"}]}},computed:dt(dt(dt({},Object(k["d"])("user",["userInfo"])),Object(k["d"])("workbench",["selectedList"])),{},{minData:function(){return this.data.slice(0,10)}}),mounted:function(){},methods:{onClickJump:function(t,e){if(this.selectedList.length){var a=this.selectedList.map((function(t){return"".concat(t.code,"|").concat(t.name,"|").concat(t.type)})).join(",");Object(Q["b"])({path:"home",query:{tab:"DataCenter",datatab:"networkManage",type:t.type,code:t.code,name:t.name,options:a}})}else this.$toast("全国权限，不能点击")}}},ft=ht,pt=(a("d11e"),Object(A["a"])(ft,Z,J,!1,null,"494ab5ab",null)),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("panel-tittle",{attrs:{tittle:"各"+t.type+"月目标完成情况"},scopedSlots:t._u([{key:"rightSlot",fn:function(){return[a("div",{staticClass:"right"},[a("i",{staticClass:"color"}),a("span",[t._v("未完成")])])]},proxy:!0}])}),a("div",{staticStyle:{"overflow-x":"scroll"},on:{touchmove:function(t){t.stopPropagation()}}},[a("x-table",{attrs:{isSetWidth:"",data:t.data,"expand-row-keys":[0]}},[a("x-table-column",{attrs:{label:"月份",prop:"month",width:"32"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.month)+"月")]}}])}),a("x-table-column",{attrs:{label:"月应完成量(万票)",prop:"targetTotalNum",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("FORMAT_NUMBER_4")(e.row.targetTotalNum)))])]}}])}),a("x-table-column",{attrs:{label:"月已完成量(万票)",prop:"achieveTotalNum",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.status&&e.row.month!==t.currentMonth?"wrong1":""},[t._v(" "+t._s(t._f("FORMAT_NUMBER_4")(e.row.achieveTotalNum))+" ")])]}}])}),"中心"===t.type?a("x-table-column",{attrs:{width:"120",label:"月累计未完成中心(个)",prop:"riskCenter"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.riskCenter&&e.row.month!==t.currentMonth?"wrong1":""},[t._v(" "+t._s(e.row.month===t.currentMonth?"--":e.row.riskCenter)+" ")])]}}],null,!1,2780978038)}):t._e(),"中心"===t.type||"网格"===t.type?a("x-table-column",{attrs:{label:"月累计未完成网格(个)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.riskGrid&&e.row.month!==t.currentMonth?"wrong1":""},[t._v(" "+t._s(e.row.month===t.currentMonth?"--":e.row.riskGrid)+" ")])]}}],null,!1,2845012438)}):t._e(),a("x-table-column",{attrs:{label:"月累计未完成网点(个)",prop:"riskSite",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:e.row.riskSite&&e.row.month!==t.currentMonth?"wrong1":""},[t._v(" "+t._s(e.row.month===t.currentMonth?"--":e.row.riskSite)+" ")])]}}])}),a("x-table-column",{attrs:{label:"详情",width:"30",type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("bar-chart-line",{attrs:{data:t._f("formatBarChartLineData")(e.row.monthTargetVoList),color:t.chartColorConfig,labelType:"cat",height:180,labelTickCount:8,avgLable:t.type+"平均完成率",avgValue:e.row.completionRate}})]}}])})],1)],1)],1)},gt=[],yt={components:{BarChartLine:lt,panelTittle:ut["a"]},filters:{formatBarChartLineData:function(t){for(var e=[],a=0;a<8;a++)if(t&&t.length>a){var n=t[a];e.push({label:n.name,value:n.targetNum||0,type:"月应完成量"}),e.push({label:n.name,value:n.achieveNum||0,type:"月已完成量"}),e.push({label:n.name,value2:n.completionRate||0,type:"完成率"})}else e.push({label:"hide_".concat(a),value:0,type:"月应完成量"}),e.push({label:"hide_".concat(a),value:0,type:"月已完成量"});return e}},props:{type:{type:String,default:""},data:{type:Array,default:function(){return[]}}},data:function(){return{currentMonth:(new Date).getMonth()+1,chartColorConfig:[{type:"月应完成量",color:"#75A0FF",marker:"square"},{type:"月已完成量",color:"#FFB559",marker:"square"},{type:"完成率",color:"#3693FF",marker:"line"}]}},computed:{},mounted:function(){},methods:{}},bt=yt,_t=(a("cad8"),Object(A["a"])(bt,vt,gt,!1,null,"3a30a70a",null)),Ct=_t.exports,wt=a("099d");function xt(t,e){var a=v()(t);if(p.a){var n=p()(t);e&&(n=n.filter((function(e){return h()(t,e).enumerable}))),a.push.apply(a,n)}return a}function Tt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(a),!0).forEach((function(e){Object(C["a"])(t,e,a[e])})):c.a?l()(t,c()(a)):xt(Object(a)).forEach((function(e){r()(t,e,h()(a,e))}))}return t}var kt={name:"NetworkManage",components:{Card:S["a"],Progress:B,TargetItem:q,CompleteItem:K,YearList:mt,MonthList:Ct,panelTittle:ut["a"]},mixins:[wt["a"]],props:{updateTimeList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!0,empty:!0,data:void 0,showBacktop:!1}},computed:Tt(Tt({},Object(k["d"])("user",["userInfo"])),{},{type:function(){if(!this.selectData)return"中心";var t={0:"管区",1:"中心",2:"网格",3:"网点"};return t[this.selectData.type]},tableType:function(){if(!this.selectData)return"中心";var t=this.selectData.type+1;if(t>3)return"本网点";var e={0:"管区",1:"中心",2:"网格",3:"网点"};return e[t]},notCompleteList:function(){if(this.data)return this.data.areaBusinessVolumeRiskVoList.filter((function(t){return t.dataLable.includes("未完成")}))},fxList:function(){if(this.data)return this.data.areaBusinessVolumeRiskVoList.filter((function(t){return t.dataLable.includes("有风险")}))}}),created:function(){},mounted:function(){},destroyed:function(){},methods:{refresh:function(){var t,e,a,n=this;return _.a.async((function(s){while(1)switch(s.prev=s.next){case 0:return this.loading=!0,t=(new Date).getTime(),s.prev=2,e={code:this.selectData.code,type:this.selectData.type},s.next=6,_.a.awrap(T(e));case 6:this.data=s.sent,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](2),this.data=null;case 12:return s.prev=12,a=(new Date).getTime()-t,setTimeout((function(){n.loading=!1,n.empty=!n.data}),a<400?400:0),s.finish(12);case 16:case"end":return s.stop()}}),null,this,[[2,9,12,16]],y.a)}}},St=kt,Mt=(a("868f"),Object(A["a"])(St,n,s,!1,null,"3e5a621e",null));e["default"]=Mt.exports},b532:function(t,e,a){},c46f:function(t,e,a){},cad8:function(t,e,a){"use strict";var n=a("1ed2"),s=a.n(n);s.a},d11e:function(t,e,a){"use strict";var n=a("8e3a"),s=a.n(n);s.a},d33d:function(t,e,a){},dba2:function(t,e,a){"use strict";var n=a("b532"),s=a.n(n);s.a},ed36:function(t,e,a){"use strict";var n=a("8eeb5"),s=a.n(n);s.a}}]);