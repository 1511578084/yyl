(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dc77e90"],{"07d7":function(t,e,a){"use strict";var n=a("d33d"),i=a.n(n);i.a},"099d":function(t,e,a){"use strict";a("4de4"),a("4160"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b");var n=a("85f2"),i=a.n(n),r=a("d847"),o=a.n(r),s=a("5e83"),l=a.n(s),c=a("268f"),u=a.n(c),d=a("e265"),h=a.n(d),f=a("a4bb"),p=a.n(f),m=a("284c"),v=a("2fa7"),b=a("c1df"),y=a.n(b),g=a("2f62");function x(t,e){var a=p()(t);if(h.a){var n=h()(t);e&&(n=n.filter((function(e){return u()(t,e).enumerable}))),a.push.apply(a,n)}return a}function A(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?x(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):l.a?o()(t,l()(a)):x(Object(a)).forEach((function(e){i()(t,e,u()(a,e))}))}return t}e["a"]={data:function(){return{defaultSite:void 0,selectData:{code:"",name:"",type:"",month:y()().subtract(1,"month").format("YYYY-MM"),date:y()().format("YYYY-MM-DD")},minDate:y()().subtract(180,"days").toDate(),maxDate:y()().subtract(1,"days").toDate(),disableTabs:[1],penaltyMaxDate:y()().month(y()().month()-1).startOf("month").toDate()}},created:function(){this.parseRouterParams()},computed:A({},Object(g["d"])("user",["userInfo"])),filters:{FORMAT_TIME:function(t){return y()(t).format("YYYY-MM-DD HH:mm:ss")}},methods:A(A({},Object(g["b"])("workbench",["setSelectedList"])),{},{onChangeTime:function(){this.refresh()},onChangeSite:function(t,e,a){this.selectData.code=e.code,this.selectData.name=e.name,this.selectData.type=e.type,this.setSelectedList(Object(m["a"])(a)),this.refresh()},parseRouterParams:function(){this.$route.query.date&&(this.selectData.date=this.$route.query.date),this.$route.query.month&&(this.selectData.month=this.$route.query.month),this.$route.query.code&&this.$route.query.type?this.defaultSite={code:this.$route.query.code,name:this.$route.query.name,type:Number(this.$route.query.type),options:this.$route.query.options?this.$route.query.options.split(",").map((function(t){var e=t.split("|");return{code:e[0],name:e[1],type:Number(e[2])}})):[]}:this.userInfo.authCode?this.defaultSite={code:this.userInfo.authCode,name:this.userInfo.authName,type:this.userInfo.authType}:this.defaultSite={code:this.userInfo.siteCode,name:this.userInfo.siteName,type:3}}})}},2238:function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-pull-refresh",{staticClass:"card",attrs:{disabled:t.disabeldLoading},on:{refresh:t.onRefresh},model:{value:t.refreshLoading,callback:function(e){t.refreshLoading=e},expression:"refreshLoading"}},[t._t("header"),!t.refreshLoading&&t.loading?a("div",{staticClass:"loading"},[a("van-loading",{attrs:{type:"spinner"}})],1):t._e(),!t.loading&&t.empty?a("div",{staticClass:"empty"},[a("img",{attrs:{src:"/static/images/ic_empty.png",alt:""}}),a("span",[t._v(t._s(t.emptyTip))])]):t._e(),a("div",{staticClass:"card-body",class:t.empty||t.loading?"hide":"show"},[t._t("default")],2)],2)},r=[],o=(a("b0c0"),a("2fa7")),s=(a("ac1e"),a("543e")),l=(a("2b28"),a("9ed2")),c=(a("342a"),a("1437")),u=(a("5d17"),a("f9bd")),d={components:(n={},Object(o["a"])(n,u["a"].name,u["a"]),Object(o["a"])(n,c["a"].name,c["a"]),Object(o["a"])(n,l["a"].name,l["a"]),Object(o["a"])(n,s["a"].name,s["a"]),n),model:{prop:"collapse",event:"change"},props:{empty:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyTip:{type:String,default:"暂无数据"}},data:function(){return{disabeldLoading:!1,refreshLoading:!1}},computed:{},mounted:function(){},methods:{onRefresh:function(){var t=this;this.$emit("refresh"),setTimeout((function(){t.refreshLoading=!1}),1e3)}}},h=d,f=(a("42ff"),a("2877")),p=Object(f["a"])(h,i,r,!1,null,"23c32275",null);e["a"]=p.exports},"42ff":function(t,e,a){"use strict";var n=a("8357"),i=a.n(n);i.a},4887:function(t,e,a){"use strict";var n=a("b51a"),i=a.n(n);i.a},"70fa":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAoCAYAAAAsYdCDAAAAAXNSR0IArs4c6QAAAKBJREFUOE9jDOr49l+Un5HBSImZwd2QmUFelIkBHTB6Nn37DxNkYmRg8DZhYUhxZWVgZUYoRVEEE9ZXYGJoimKHK8SqCKTY15SFIdODFawPpyKQ1VPT2cFuxKkIZEKAOQtDmhsrfkVyoowMMzI48CviZGNgWFvOiV8RyMpttaOKRoNgNBXQMyMQlTmJyuYECwyiih6ChRje4hBnwUpMEQ0AnaOfiSX3Z0YAAAAASUVORK5CYII="},8357:function(t,e,a){},"851b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panelTittle"},[a("div",{staticClass:"leftPart"},[t._m(0),a("div",{staticClass:"titleText"},[t._v(t._s(t.tittle))])]),a("div",[t._t("rightSlot")],2)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panelImg"},[n("img",{attrs:{src:a("70fa"),alt:""}})])}],r={props:{tittle:{type:String,default:""}}},o=r,s=(a("07d7"),a("2877")),l=Object(s["a"])(o,n,i,!1,null,"08b99db6",null);e["a"]=l.exports},b51a:function(t,e,a){},bd48:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar-chart"},[a("canvas",{ref:"canvas"}),a("div",{ref:"tooltip",staticClass:"f2-tooltip"}),a("div",{ref:"legend",staticClass:"legend"})])},i=[],r=(a("99af"),a("cb29"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("2532"),a("159b"),a("284c")),o=a("59ad"),s=a.n(o),l=a("795b"),c=a.n(l),u=a("967e"),d=a.n(u),h=(a("96cf"),a("bf9c")),f=a("8a75"),p=a.n(f),m={components:{},props:{data:{type:Array,default:function(){return[]}},color:{type:Array,default:function(){return[]}},type:{type:String,default:"dodge"},defaultBarColor:{type:String,default:"#ff0000"},valueFormatter:{type:Function,default:function(t){var e=String(t).length;return e>8?"".concat(t/1e8,"亿"):e>4?"".concat(t/1e4,"万"):t}},labelFormatter:{type:Function,default:function(t){return t}},labelType:{type:String,default:"timeCat"},labelTickCount:{type:Number,default:0},labelRange:{type:Array,default:function(){return[.05,.95]}},height:{type:Number,default:300},unit:{type:String,default:"万"},avgLable:{type:String,default:""},avgValue:{type:Number,default:25},legendWidth:{type:Number,default:200},tooltipNameWidth:{type:Number,default:160},signal:{type:String,default:"%"},ticks:{type:Array,default:function(){return[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]}}},data:function(){return{chart:null,xAxis:[],unitCount:0,unitText:"票",unitGuide:null}},computed:{},watch:{data:{handler:function(){this.updateData()}}},activated:function(){},mounted:function(){this.render(),window.addEventListener("resize",this.resize),this.Event.$on("refreshChart",this.updateData)},destroyed:function(){window.removeEventListener("resize",this.resize),this.Event.$off("refreshChart",this.updateData),this.chart&&(this.chart.destroy(),this.chart=null)},methods:{resize:function(){this.chart&&this.chart.changeSize(this.$el.clientWidth,this.$el.clientHeight)},updateData:function(){return d.a.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.awrap(this.$nextTick());case 2:0!==this.$el.clientWidth&&(this.chart.clear(),this.render(),this.resize());case 3:case"end":return t.stop()}}),null,this,null,c.a)},px2hd:function(t){var e=s()(document.documentElement.style.fontSize,10)||100,a=e/37.5;return Number((t*a).toFixed(1))},calcUnitCount:function(){var t=Math.max.apply(Math,Object(r["a"])(this.data.filter((function(t){return Object.prototype.hasOwnProperty.call(t,"value")&&t.value})).map((function(t){return t.value}))));t>1e8?this.unitCount=2:t>1e4&&(this.unitCount=1),this.unitText=2===this.unitCount?"(亿票)":1===this.unitCount?"(万票)":"(票)"},showTootip:function(t){var e=this.$refs.tooltip,a=t.items[0].title;a.includes("hide_")&&(a="-");for(var n=e.childNodes.length-1;n>=0;n--)e.removeChild(e.childNodes[n]);var i=document.createElement("div");i.innerHTML=a,e.appendChild(i);for(var r=0;r<t.items.length;r++){var o=t.items[r],s=document.createElement("div"),l=document.createElement("span");l.className="name",l.innerHTML="".concat(o.name),s.appendChild(l);var c=document.createElement("span");c.className="value",c.innerHTML=Object.prototype.hasOwnProperty.call(o.origin,"value2")?"".concat(o.origin.value2).concat(this.signal):"".concat(Object(h["a"])(o.origin.value)),s.appendChild(c),e.appendChild(s)}var u=t.items[0].x-e.clientWidth/2;u=Math.max(u,0),u=Math.min(u,this.$refs.canvas.clientWidth),e.style.opacity=1,e.style.left="".concat(u,"px")},render:function(){var t=this;this.calcUnitCount();var e=new p.a.Chart({el:this.$refs.canvas,pixelRatio:window.devicePixelRatio,padding:[this.px2hd(70),this.px2hd(40),this.px2hd(30),this.px2hd(40)],height:this.px2hd(this.height)});this.data&&this.data.length>0&&e.source(this.data),e.axis("label",{labelOffset:15,label:function(e,a,n){var i={textAlign:"center",fontSize:t.px2hd(10),rotate:-Math.PI/4,textBaseline:"middle"};return e.includes("hide_")&&(i.text="-"),i}}),e.axis("value2",{verticalLimitLength:this.px2hd(40),label:function(e){var a={autoEllipsis:!0,autoRotate:!1,fontSize:t.px2hd(12),text:"".concat(e).concat(t.signal)};return a}}),e.axis("value",{offsetX:0,verticalLimitLength:this.px2hd(40),label:function(e){var a={autoEllipsis:!0,autoRotate:!1,fontSize:t.px2hd(12),text:e};return a}}),e.scale({value2:{ticks:this.ticks},value:{formatter:function(e){var a=e;return 2===t.unitCount&&(a=(e/1e8).toFixed(1)),1===t.unitCount&&(a=(e/1e4).toFixed(1)),Number(a)},isRounding:!0},label:{type:this.labelType,formatter:this.labelFormatter}});var a=this.$refs.legend;a.innerHTML="",e.legend({custom:!0,clickable:!1,position:"top",align:"right",offsetX:0,showTitle:!1,nameStyle:{fontSize:this.px2hd(11)},itemWidth:null,itemGap:this.px2hd(10),wordSpace:this.px2hd(5),items:[{name:"   "}].concat(Object(r["a"])(this.color.map((function(e){var a={};return a.name=e.type,a.marker={symbol:"square",fill:e.color,fontSize:t.px2hd(5),width:20},"line"===e.marker&&(a.marker=function(t,a,n,i){i.lineWidth=1,i.strokeStyle=e.color,i.moveTo(t-n-3,a),i.lineTo(t+n+3,a),i.stroke(),i.fill()}),a}))))}),e.interval().position("label*value").color("type",(function(e){var a=t.color.find((function(t){return e===t.type}));return a?a.color:t.defaultBarColor})).size(this.px2hd(15)).adjust({type:this.type,marginRatio:.81}),e.line().position("label*value2").color("type",(function(e){var a=t.color.find((function(t){return e===t.type}));return a?a.color:t.defaultBarColor})),this.unitGuide=e.guide().text({position:["min","max"],content:this.unitText,style:{textBaseline:"middle",textAlign:"center",fontSize:this.px2hd(11)},offsetX:-this.px2hd(10),offsetY:-this.px2hd(50)}),this.avgLable&&(e.guide().line({top:!0,start:function(e,a){var n=a[1].max-a[1].min,i=t.avgValue/n*100;return["0%","".concat(100-i,"%")]},end:function(e,a){var n=a[1].max-a[1].min,i=t.avgValue/n*100;return["100%","".concat(100-i,"%")]},style:{stroke:"#a1a1a1",lineWidth:1,lineCap:"round"}}),e.guide().text({position:function(e,a){var n=a[1].max-a[1].min,i=t.avgValue/n*100;return["100%","".concat(100-i,"%")]},top:!0,content:"".concat(this.avgLable,"： ").concat(this.avgValue,"%"),offsetY:-2,style:{fill:"#a1a1a1",textAlign:"end",textBaseline:"bottom",fontWeight:"bold",fontSize:this.px2hd(11)}})),e.tooltip({alwaysShow:!1,showTitle:!0,layout:"vertical",triggerOn:["touchstart","touchmove","click"],offsetY:this.px2hd(100),titleStyle:{fontSize:this.px2hd(11),fill:"#4A4A4A"},background:{fill:"#fff",radius:this.px2hd(5),padding:[this.px2hd(8),this.px2hd(10)],stroke:"#979797",lineWidth:1},nameStyle:{width:this.px2hd(this.tooltipNameWidth),fontSize:this.px2hd(11),fill:"#909399",textAlign:"start",textBaseline:"middle"},valueStyle:{fontSize:this.px2hd(11),fill:"#3693FF",textAlign:"right",textBaseline:"middle"},onShow:function(e){e.items.forEach((function(e){e.title.includes("hide_")&&(e.title="-"),e.value=Object.prototype.hasOwnProperty.call(e.origin,"value2")?"".concat(e.origin.value2).concat(t.signal):"".concat(Object(h["a"])(e.origin.value))}))}}),0!==this.$el.clientWidth&&e.render(),this.chart=e}}},v=m,b=(a("4887"),a("2877")),y=Object(b["a"])(v,n,i,!1,null,"67e999fa",null);e["a"]=y.exports},ca00:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("99af"),a("4de4"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("159b"),a("85f2"),a("d847"),a("5e83"),a("268f"),a("e265"),a("5d73"),a("5d58"),a("67bb"),a("774e");var n=a("59ad"),i=a.n(n);a("e587"),a("2d1f"),a("2fa7"),a("795b"),a("967e"),a("96cf"),a("a4bb"),a("a745"),a("bf2d"),a("0644"),a("1a8c"),a("901e");function r(t){var e=i()(document.documentElement.style.fontSize,10)||100,a=e/37.5;return Number((t*a).toFixed(1))}},d33d:function(t,e,a){}}]);