(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccc1a518"],{"02bb":function(e,t,a){},"0eb4":function(e,t,a){},a04f:function(e,t,a){"use strict";var i=a("ede0"),s=a.n(i);s.a},b786:function(e,t,a){"use strict";var i=a("02bb"),s=a.n(i);s.a},cf94:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"deliveryQuoteDetail",staticClass:"facePolicyDetail"},[a("van-tabs",{ref:"tabs",attrs:{color:"#3693ff","title-active-color":"#3693ff",background:"#fff","before-change":e.onBeforeChangeTab,"lazy-render":!1,sticky:""},on:{change:e.onChangeTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(t){return a("van-tab",{key:t.type,attrs:{title:t.tabName,name:t.type}},[a("detail-panel",{ref:"detailPanel"+t.type,refInFor:!0,attrs:{tabActive:e.active},on:{onDownTab:e.onDownTab}})],1)})),1)],1)},s=[],n=(a("4de4"),a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detailPenal"},[a("div",{staticClass:"form-field"},[a("div",{staticClass:"area-search"},[a("van-search",{attrs:{shape:"round",background:"#fff",placeholder:e.placeholder,readonly:""},on:{focus:e.onFocus},model:{value:e.codes,callback:function(t){e.codes=t},expression:"codes"}}),e.codes?a("van-icon",{staticClass:"close-icon",attrs:{name:"close"},on:{click:e.onAreaClean}}):e._e()],1),a("b-select-date",{staticClass:"area-date",attrs:{stype:"year-month",zoneNo:!0,title:"请选择年月",minDate:e.expensesPolicyMinDate,maxDate:e.expensesPolicyMaxDate},on:{change:e.onChangeTime},model:{value:e.selectData.sumDate,callback:function(t){e.$set(e.selectData,"sumDate",t)},expression:"selectData.sumDate"}})],1),a("div",{staticClass:"form-field"},[a("div",{staticClass:"form-field-container"},[a("van-field",{staticClass:"form-field-select",attrs:{readonly:"",clickable:"",name:"picker",value:e.siteTypeStr,placeholder:"请选择网点类型"},on:{click:function(t){e.siteTypeShow=!0}}}),e.siteTypeStr?a("van-icon",{staticClass:"close-icon",attrs:{name:"close"},on:{click:function(t){return e.onClear(1)}}}):e._e(),a("van-action-sheet",{attrs:{title:"网点类型"},model:{value:e.siteTypeShow,callback:function(t){e.siteTypeShow=t},expression:"siteTypeShow"}},e._l(e.siteTypeList,(function(t){return a("div",{key:t.value,staticClass:"select-sheet",on:{click:function(a){return e.onSelect(t)}}},[e._v(" "+e._s(t.label)+" ")])})),0)],1)]),a("b-select-site-multiple",{ref:"selectSite",attrs:{defaultData:e.defaultSite,disableTabs:e.disableTabs},on:{change:e.onChangeSite},model:{value:e.selectCode,callback:function(t){e.selectCode=t},expression:"selectCode"}}),a("div",{staticClass:"content"},[a("hy-table",{staticClass:"base-table",attrs:{"table-data":e.tableData,columns:e.tableHeader,scrollWidth:"100%",border:"",theme:"light","border-y":!0,isShowMore:!0,total:e.total,isFixedHeader:!0,maxHeight:480},on:{updateData:e.updateData,displayMore:e.displayMore}})],1),a("site-popup",{ref:"sitePopup"}),a("rule-popup",{ref:"rulePopup"})],1)}),o=[],c=(a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("c7cd"),a("159b"),a("85f2")),r=a.n(c),l=a("d847"),d=a.n(l),h=a("5e83"),u=a.n(h),f=a("268f"),p=a.n(f),C=a("e265"),m=a.n(C),g=a("a4bb"),b=a.n(g),y=a("795b"),v=a.n(y),D=a("967e"),L=a.n(D),w=a("284c"),S=(a("96cf"),a("2fa7")),T=a("0644"),P=a.n(T),k=a("c1df"),N=a.n(k),x=a("2f62"),$=a("538d"),B=function(e){return[{field:"manageName",key:"manageName",title:"管理区",width:80},{field:"districtName",key:"districtName",title:"片区",width:120},{field:"centerName",key:"centerName",title:"中心",width:120},{field:"policyTypeName",key:"policyTypeName",title:"网点类型",width:130},{field:"siteNum",key:"siteNum",title:"网点个数",width:100,renderBodyCell:function(t,a){var i=t.row;t.column,t.rowIndex;return Number(i.siteNum)?a("span",{class:"color2fe",on:{click:function(){return e.toNextTab(i,1)}}},[i.siteNum]):a("span",[i.siteNum])}},{field:"weightSegment",key:"weightSegment",title:"重量段",width:140},{field:"fee",key:"fee",title:"费用",width:140},{field:"startTimeDesc",key:"startTimeDesc",title:"开始时间",width:160},{field:"endTimeDesc",key:"endTimeDesc",title:"结束时间",width:160}]},A=[{value:"SiteTypeCommon",label:"派费政策-普通"},{value:"SiteTypeBigChan",label:"派费政策-大产粮"},{value:"SiteTypeChan",label:"派费政策-产粮"},{value:"SiteTypeSpecial",label:"派费政策-特殊"}],z=a("0532"),_=a("dcbf");function q(e,t){var a=b()(e);if(m.a){var i=m()(e);t&&(i=i.filter((function(t){return p()(e,t).enumerable}))),a.push.apply(a,i)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Object(S["a"])(e,t,a[t])})):u.a?d()(e,u()(a)):q(Object(a)).forEach((function(t){r()(e,t,p()(a,t))}))}return e}var O={name:"detailPanel",components:{SitePopup:z["a"],RulePopup:_["a"]},props:{tabActive:{type:Number,default:2}},data:function(){return{loading:!0,codes:"",selectCode:[],downDistrictCode:[],downCenterCode:[],downDistrictAreaCode:"",isFirst:!0,defaultSite:[],selectData:{code:[],type:"",sumDate:N()().format("YYYY-MM"),siteType:null},cacheParams:{manageCodeList:[],centerCodeList:[],siteCodeList:[]},placeholder:"请输入管理区名称",dtype:"",tableData:[],total:0,pageSize:10,currentPage:1,siteTypeStr:"",siteTypeList:A,siteTypeShow:!1,expensesPolicyMaxDate:new Date,expensesPolicyMinDate:N()().subtract(24,"months").toDate()}},computed:j(j({},Object(x["d"])("user",["userInfo"])),{},{disableTabs:function(){return 2===this.tabActive||3===this.tabActive?[3]:[]},tableHeader:function(){var e=P()(B(this));return 2===this.tabActive?(e=e.filter((function(e){return"weightSegment"!==e.field&&"fee"!==e.field&&"startTimeDesc"!==e.field&&"endTimeDesc"!==e.field})),e[0].fixed="left"):1===this.tabActive&&(e=e.filter((function(e){return"districtName"!==e.field&&"centerName"!==e.field&&"siteNum"!==e.field})),e.unshift({field:"siteName",key:"siteName",title:"网点",width:120,fixed:"left"})),e}}),watch:{tabActive:{immediate:!0,handler:function(e){2===e?this.placeholder="请输入管区/中心名称":1===e&&(this.placeholder="请输入网点名称")}}},created:function(){this.parseRouterParams()},mounted:function(){},methods:{onAreaClean:function(){0===this.userInfo.authType&&"0"===this.userInfo.authCode?(this.codes="",this.selectData.code=[]):(this.codes=this.$route.query.name,this.selectData.code=this.$route.query.code.split()),this.selectCode=[],this.cacheParams={manageCodeList:[],centerCodeList:[],siteCodeList:[]},this.onSearchRefresh()},onClear:function(e){1===e&&(this.siteTypeStr="",this.selectData.siteType=null),this.onSearchRefresh()},onSelect:function(e){this.siteTypeStr=e.label,this.selectData.siteType=e.value,this.siteTypeShow=!1,this.onSearchRefresh()},toNextTab:function(e,t){e.sumDate=this.selectData.sumDate,this.$emit("onDownTab",t,e)},getParams:function(e){var t=Number(this.$route.query.selectTab),a=this.$route.query.code,i=P()(this.selectData),s=e||this.tabActive;if(1===t){var n=this.cacheParams.centerCodeList.length?this.cacheParams.centerCodeList:this.selectData.code;i.manageCodeList=this.cacheParams.manageCodeList,i.centerCodeList=this.selectCode.length||this.cacheParams.manageCodeList.length?[]:n,i.siteCodeList=this.selectCode}else if(0===t&&"0"!==a){var o=this.cacheParams.manageCodeList.length?this.cacheParams.manageCodeList:this.selectData.code;i.manageCodeList=this.selectCode.length||this.cacheParams.centerCodeList.length?[]:o,i.centerCodeList=3===s&&this.selectCode.length?this.selectCode:this.cacheParams.centerCodeList,this.downCenterCode.length&&1===s&&(i.manageCodeList=[],i.centerCodeList=this.downCenterCode),i.siteCodeList=1===s&&this.selectCode.length?this.selectCode:[]}else{var c=this.cacheParams.manageCodeList.length?this.cacheParams.manageCodeList:this.selectData.code,r=this.cacheParams.centerCodeList.length?this.cacheParams.centerCodeList:[];i.manageCodeList=2===s&&this.selectCode.length&&this.cacheParams.manageCodeList.length?this.selectCode:c,i.centerCodeList=2===s&&this.selectCode.length&&this.cacheParams.centerCodeList.length?this.selectCode:r,this.selectCode.length||(i.manageCodeList=c),2!==s&&this.selectCode.length&&(i.manageCodeList=[],i.centerCodeList=[]),this.downCenterCode.length&&1===s&&(i.manageCodeList=[],i.centerCodeList=this.downCenterCode),this.downDistrictCode.length&&1===s&&(i.manageCodeList=this.downDistrictCode),i.siteCodeList=1===s&&this.selectCode.length?this.selectCode:[]}return this.downDistrictAreaCode&&(i.districtCode=this.downDistrictAreaCode),delete i.code,i},parseRouterParams:function(){this.$route.query.month&&(this.selectData.sumDate=this.$route.query.month),this.selectData.type=this.tabActive,this.selectData.code="0"===this.$route.query.code?[]:this.$route.query.code.split(),this.defaultSite=[{code:this.$route.query.code,type:Number(this.$route.query.selectTab)}],"0"!==this.$route.query.code&&(this.codes=this.$route.query.name);var e=this.getParams();e.page=1,e.pageSize=this.pageSize,this.tableData=[],this.getBoardQuoteList(e)},onParChangeTab:function(e){this.currentPage=1,this.selectData.type=e;var t=this.getParams(e);t.page=1,t.pageSize=this.pageSize,this.tableData=[],this.getBoardQuoteList(t)},onRefresh:function(e,t){this.currentPage=1,this.selectData.type=e,this.downDistrictCode=String(t.manageCode).split(),this.downCenterCode=String(t.centerCode).split(),this.downDistrictAreaCode=t.districtCode,this.selectData.sumDate=t.sumDate,this.selectData.siteType=t.policyCode,this.siteTypeStr=t.policyTypeName,this.codes=t.centerName,this.selectCode=[];var a=P()(this.selectData);a.manageCodeList=String(t.manageCode).split(),a.districtCode=t.districtCode,a.centerCodeList=String(t.centerCode).split(),a.siteCodeList=[],delete a.code,a.page=1,a.pageSize=this.pageSize,this.tableData=[],this.getBoardQuoteList(a)},onChangeTime:function(){this.onSearchRefresh()},onSearchRefresh:function(){this.currentPage=1;var e=this.getParams();e.page=1,e.pageSize=this.pageSize,this.tableData=[],this.getBoardQuoteList(e)},onFocus:function(){this.$refs.selectSite.onClickSiteSelect()},onChangeSite:function(e,t){this.currentPage=1;var a=P()(this.selectData);if(a.manageCodeList=[],a.centerCodeList=[],a.siteCodeList=[],this.downDistrictAreaCode="",this.downCenterCode=[],this.downDistrictCode=[],e.length)this.codes=e.map((function(e){return e.label})).join(","),this.selectCode=e.map((function(e){return e.value})),1===this.tabActive?a.siteCodeList=this.selectCode:2===this.tabActive&&0===e[0].type?a.manageCodeList=this.selectCode:2===this.tabActive&&1===e[0].type&&(a.centerCodeList=this.selectCode);else{this.selectCode=[],"0"!==t[t.length-1].code?this.codes=t[t.length-1].label:this.codes="";var i=t[t.length-1].type;0===i?a.manageCodeList="0"===t[t.length-1].code?[]:t[t.length-1].code.split():1===i?a.centerCodeList=t[t.length-1].code.split():3===i&&(a.siteCodeList=t[t.length-1].code.split())}this.cacheParams={manageCodeList:a.manageCodeList,centerCodeList:a.centerCodeList,siteCodeList:a.siteCodeList},delete a.code,a.page=1,a.pageSize=this.pageSize,this.tableData=[],this.getBoardQuoteList(a)},getBoardQuoteList:function(e){var t,a;return L.a.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,L.a.awrap(Object($["f"])(e));case 2:a=i.sent,(t=this.tableData).push.apply(t,Object(w["a"])(a.list)),this.total=a.total;case 5:case"end":return i.stop()}}),null,this,null,v.a)},updateData:function(e){if(this.currentPage++,this.tableData.length<this.total){var t=this.getParams();this.getBoardQuoteList(j({pageSize:this.pageSize,page:this.currentPage},t))}},displayMore:function(e){this.currentPage=1,this.tableData=[];var t=this.getParams();this.getBoardQuoteList(j({pageSize:this.pageSize,page:this.currentPage},t))}}},Q=O,M=(a("b786"),a("2877")),R=Object(M["a"])(Q,n,o,!1,null,"9c96cbd6",null),I=R.exports,E={name:"deliveryQuoteDetail",components:{DetailPanel:I},data:function(){return{active:2,codes:"",tabList:[{tabName:"管区",type:2},{tabName:"网点",type:1}]}},computed:{tabs:function(){var e=this.$route.query.selectTab,t=this.tabList;return 1===Number(e)&&(t=this.tabList.filter((function(e){return 2!==e.type&&3!==e.type}))),t}},created:function(){this.active=this.getQueryType()},mounted:function(){},methods:{getQueryType:function(){var e=this.$route.query.code,t=Number(this.$route.query.selectTab),a=2;return 0===t&&"0"!==e?a=2:1===t&&(a=1),a},onDownTab:function(e,t){this.active=e;var a=this.$refs["detailPanel"+e];a&&a[0].onRefresh(e,t)},onBeforeChangeTab:function(e){return!0},onChangeTab:function(e){var t=this.$refs["detailPanel"+e];t&&t[0].onParChangeTab(e)}}},F=E,H=(a("a04f"),Object(M["a"])(F,i,s,!1,null,"256deb69",null));t["default"]=H.exports},dcbf:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.onClose,closed:e.onClosed},model:{value:e.showBody,callback:function(t){e.showBody=t},expression:"showBody"}},[a("div",{staticClass:"popup-body"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[e._v(e._s(e.ruleObj.title))]),a("img",{staticClass:"close",attrs:{src:e.closeIcon,alt:""},on:{click:function(t){e.showBody=!1}}})]),e.showBody?a("div",{staticClass:"hint-info"},[a("div",[e._v(" "+e._s(e.ruleObj.reason)+" ")])]):e._e()])])],1)},s=[],n=a("71e1"),o=a.n(n),c={data:function(){return{closeIcon:o.a,showBody:!1,ruleObj:{tilte:"规则标准"}}},methods:{onOpen:function(e){this.ruleObj=e,this.showBody=!0},onClose:function(){},onClosed:function(){this.showBody=!1}}},r=c,l=(a("eaf4"),a("2877")),d=Object(l["a"])(r,i,s,!1,null,"cd2390be",null);t["a"]=d.exports},eaf4:function(e,t,a){"use strict";var i=a("0eb4"),s=a.n(i);s.a},ede0:function(e,t,a){}}]);