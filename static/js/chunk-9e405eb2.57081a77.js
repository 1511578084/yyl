(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e405eb2"],{"092c":function(e,t,s){},"81d8":function(e,t,s){"use strict";var i=s("092c"),a=s.n(i);a.a},"8a586":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"siteContribution",staticClass:"siteContribution"},[s("van-tabs",{ref:"tabs",attrs:{color:"#3693ff","title-active-color":"#3693ff",background:"#fff","before-change":e.onBeforeChangeTab,"lazy-render":!1,sticky:""},on:{change:e.onChangeTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabs,(function(t){return s("van-tab",{key:t.type,attrs:{title:t.tabName,name:t.type}},[s("detail-panel",{ref:"detailPanel"+t.type,refInFor:!0,attrs:{tabActive:e.active},on:{onDownTab:e.onDownTab}})],1)})),1)],1)},a=[],o=(s("4de4"),s("a9e3"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detailPenal"},[s("div",{staticClass:"form-field"},[s("div",{staticClass:"area-search"},[s("van-search",{attrs:{shape:"round",background:"#fff",placeholder:e.placeholder,readonly:""},on:{focus:e.onFocus},model:{value:e.codes,callback:function(t){e.codes=t},expression:"codes"}}),e.codes?s("van-icon",{staticClass:"close-icon",attrs:{name:"close"},on:{click:e.onAreaClean}}):e._e()],1),s("b-select-date",{staticClass:"area-date",attrs:{stype:"year-month",zoneNo:!0,title:"请选择年月",minDate:e.expensesPolicyMinDate,maxDate:e.expensesPolicyMaxDate},on:{change:e.onChangeTime},model:{value:e.selectData.sumDate,callback:function(t){e.$set(e.selectData,"sumDate",t)},expression:"selectData.sumDate"}})],1),s("b-select-site-multiple",{ref:"selectSite",attrs:{defaultData:e.defaultSite,disableTabs:e.disableTabs},on:{change:e.onChangeSite},model:{value:e.selectCode,callback:function(t){e.selectCode=t},expression:"selectCode"}}),s("div",{staticClass:"content"},[s("hy-table",{staticClass:"base-table",attrs:{"table-data":e.tableData,columns:e.tableHeader,scrollWidth:"100%",border:"",theme:"light","border-y":!0,isShowMore:!0,total:e.total,isFixedHeader:!0},on:{updateData:e.updateData,displayMore:e.displayMore}})],1),s("site-popup",{ref:"sitePopup"})],1)}),n=[],c=(s("4160"),s("a15b"),s("d81d"),s("b0c0"),s("d3b7"),s("ac1f"),s("1276"),s("c7cd"),s("159b"),s("85f2")),r=s.n(c),l=s("d847"),d=s.n(l),u=s("5e83"),h=s.n(u),f=s("268f"),p=s.n(f),m=s("e265"),b=s.n(m),C=s("a4bb"),g=s.n(C),y=s("795b"),D=s.n(y),L=s("967e"),v=s.n(L),w=s("284c"),S=(s("96cf"),s("2fa7")),P=s("0644"),k=s.n(P),N=s("c1df"),T=s.n(N),A=s("2f62"),I=s("538d"),x=function(e){return[{field:"manageName",key:"manageName",title:"管理区",width:80,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return 2===e.tabActive?s("span",{class:"color2fe",on:{click:function(){return e.toNextTab(i,1)}}},[i.manageName]):s("span",[i.manageName])}},{field:"centerName",key:"centerName",title:"中心",width:120},{field:"allLossSiteNum",key:"allLossSiteNum",title:"寄派件都亏损网点数",width:160,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.allLossSiteNum)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,23)}}},[i.allLossSiteNum]):s("span",[i.allLossSiteNum])}},{field:"twoMonthAllLoss",key:"twoMonthAllLoss",title:"连续寄派件都亏损网点数",width:200,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.twoMonthAllLoss)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,26)}}},[i.twoMonthAllLoss]):s("span",[i.twoMonthAllLoss])}},{field:"sendLossSiteNum",key:"sendLossSiteNum",title:"寄件亏损网点数",width:140,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.sendLossSiteNum)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,24)}}},[i.sendLossSiteNum]):s("span",[i.sendLossSiteNum])}},{field:"twoMonthSendLossSite",key:"twoMonthSendLossSite",title:"连续寄件亏损网点数",width:160,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.twoMonthSendLossSite)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,27)}}},[i.twoMonthSendLossSite]):s("span",[i.twoMonthSendLossSite])}},{field:"dispatchLossSiteNum",key:"dispatchLossSiteNum",title:"派件亏损网点数",width:120,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.dispatchLossSiteNum)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,25)}}},[i.dispatchLossSiteNum]):s("span",[i.dispatchLossSiteNum])}},{field:"twoMonthDispatchLossSite",key:"twoMonthDispatchLossSite",title:"连续派件亏损网点数",width:160,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return Number(i.twoMonthDispatchLossSite)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,28)}}},[i.twoMonthDispatchLossSite]):s("span",[i.twoMonthDispatchLossSite])}},{field:"continueAllLossDesc",key:"continueAllLossDesc",title:"是否连续寄派件都亏损",width:180},{field:"continueSendLossDesc",key:"continueSendLossDesc",title:"是否连续寄件亏损",width:140},{field:"continueDispatchLossDesc",key:"continueDispatchLossDesc",title:"是否连续派件亏损",width:140},{field:"sendTicketProfit",key:"sendTicketProfit",title:"单票寄件利润",width:140,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return 2===e.tabActive&&Number(i.sendTicketProfit)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,18)}}},[i.sendTicketProfit]):s("span",[i.sendTicketProfit])}},{field:"sendNum",key:"sendNum",title:"寄件量",width:140},{field:"dispatchTicketProfit",key:"dispatchTicketProfit",title:"单票派件利润",width:140,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return 2===e.tabActive&&Number(i.dispatchTicketProfit)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,19)}}},[i.dispatchTicketProfit]):s("span",[i.dispatchTicketProfit])}},{field:"dispatchNum",key:"dispatchNum",title:"派件量",width:140},{field:"ticketProfitAmount",key:"ticketProfitAmount",title:"单票合计利润",width:140,renderBodyCell:function(t,s){var i=t.row;t.column,t.rowIndex;return 2===e.tabActive&&Number(i.ticketProfitAmount)?s("span",{class:"color2fe",on:{click:function(){return e.toSitePop(i,17)}}},[i.ticketProfitAmount]):s("span",[i.ticketProfitAmount])}},{field:"businessAmount",key:"businessAmount",title:"合计业务量",width:140}]},M=s("0532");function $(e,t){var s=g()(e);if(b.a){var i=b()(e);t&&(i=i.filter((function(t){return p()(e,t).enumerable}))),s.push.apply(s,i)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){Object(S["a"])(e,t,s[t])})):h.a?d()(e,h()(s)):$(Object(s)).forEach((function(t){r()(e,t,p()(s,t))}))}return e}var q={name:"detailPanel",components:{SitePopup:M["a"]},props:{tabActive:{type:Number,default:2}},data:function(){return{loading:!0,codes:"",selectCode:[],downDistrictCode:[],downCenterCode:[],isFirst:!0,defaultSite:[],selectData:{code:[],type:"",sumDate:T()().format("YYYY-MM")},cacheParams:{districtCode:[],centerCode:[],siteCode:[]},placeholder:"请输入管理区名称",dtype:"",manageAreaCode:"",month:"",applyType:[],applyStatus:[],tableData:[],total:0,pageSize:10,currentPage:1,expensesPolicyMaxDate:new Date,expensesPolicyMinDate:T()().subtract(24,"months").toDate()}},computed:B(B({},Object(A["d"])("user",["userInfo"])),{},{disableTabs:function(){return 2===this.tabActive?[1,3]:3===this.tabActive?[3]:[]},tableHeader:function(){var e=k()(x(this));return 2===this.tabActive?(e=e.filter((function(e){return"continueSendLossDesc"!==e.field&&"continueDispatchLossDesc"!==e.field&&"continueAllLossDesc"!==e.field&&"centerName"!==e.field})),e[0].fixed="left"):1===this.tabActive&&(e=e.filter((function(e){return"allLossSiteNum"!==e.field&&"twoMonthAllLoss"!==e.field&&"sendLossSiteNum"!==e.field&&"twoMonthSendLossSite"!==e.field&&"dispatchLossSiteNum"!==e.field&&"twoMonthDispatchLossSite"!==e.field})),e.unshift({field:"siteName",key:"siteName",title:"网点",width:120,fixed:"left"})),e}}),watch:{tabActive:{immediate:!0,handler:function(e){this.selectData.type=e,3===e?this.placeholder="请输入中心名称":1===e?this.placeholder="请输入网点名称":2===e&&(this.placeholder="请输入管区名称")}}},created:function(){this.parseRouterParams()},mounted:function(){},methods:{onAreaClean:function(){0===this.userInfo.authType&&"0"===this.userInfo.authCode?(this.codes="",this.selectData.code=[]):(this.codes=this.$route.query.name,this.selectData.code=this.$route.query.code.split()),this.selectCode=[],this.cacheParams={districtCode:[],centerCode:[],siteCode:[]},this.currentPage=1;var e=this.getParams();e.page=1,e.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(e)},toSitePop:function(e,t){var s="";switch(t){case 17:s="单票合计利润top10";break;case 18:s="单票寄件利润top10";break;case 19:s="单票派件利润top10";break;case 23:s="寄派都亏损网点top10";break;case 24:s="寄件亏损网点top10";break;case 25:s="派件亏损网点top10";break;case 26:s="连续寄派都亏损网点";break;case 27:s="连续寄件亏损网点";break;case 28:s="连续派件亏损网点";break}var i={title:s,topType:t,type:this.tabActive,siteCode:e.manageCode,sumDate:this.selectData.sumDate};this.$refs.sitePopup.onOpen(i,1)},toNextTab:function(e,t){e.sumDate=this.selectData.sumDate,this.$emit("onDownTab",t,e)},getParams:function(e){var t=Number(this.$route.query.selectTab),s=this.$route.query.code,i=k()(this.selectData),a=e||this.tabActive;if(1===t){var o=this.cacheParams.centerCode.length?this.cacheParams.centerCode:this.selectData.code;i.manageCodeList=this.cacheParams.districtCode,i.centerIdList=this.selectCode.length||this.cacheParams.districtCode.length?[]:o,i.siteIdList=this.selectCode}else if(0===t&&"0"!==s){var n=this.cacheParams.districtCode.length?this.cacheParams.districtCode:this.selectData.code;i.manageCodeList=this.selectCode.length||this.cacheParams.centerCode.length?[]:n,i.centerIdList=3===a&&this.selectCode.length?this.selectCode:this.cacheParams.centerCode,this.downCenterCode.length&&1===a&&(i.manageCodeList=[],i.centerIdList=this.downCenterCode),i.siteIdList=1===a&&this.selectCode.length?this.selectCode:[]}else{var c=this.cacheParams.districtCode.length?this.cacheParams.districtCode:this.selectData.code;i.manageCodeList=2===a&&this.selectCode.length&&this.cacheParams.districtCode.length?this.selectCode:c,this.selectCode.length||(i.manageCodeList=c),2!==a&&this.selectCode.length&&(i.manageCodeList=[]),i.centerIdList=3===a&&this.selectCode.length?this.selectCode:this.cacheParams.centerCode,this.downCenterCode.length&&1===a&&(i.manageCodeList=[],i.centerIdList=this.downCenterCode),this.downDistrictCode.length&&1===a&&(i.manageCodeList=this.downDistrictCode),i.siteIdList=1===a&&this.selectCode.length?this.selectCode:[]}return delete i.code,i},parseRouterParams:function(){this.$route.query.month&&(this.selectData.sumDate=this.$route.query.month),this.selectData.type=this.tabActive,this.selectData.code="0"===this.$route.query.code?[]:this.$route.query.code.split(),this.defaultSite=[{code:this.$route.query.code,label:this.$route.query.name,type:Number(this.$route.query.selectTab)}],"0"!==this.$route.query.code&&(this.codes=this.$route.query.name);var e=this.getParams();e.page=1,e.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(e)},onParChangeTab:function(e){this.currentPage=1,this.selectData.type=e;var t=this.getParams(e);t.page=1,t.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(t)},onRefresh:function(e,t){this.currentPage=1,this.selectData.type=e;var s=k()(this.selectData);t&&(this.downDistrictCode=String(t.manageCode).split()),t&&(this.selectData.sumDate=t.sumDate),this.selectCode=[];var i=[],a=[];this.codes=t.manageName,0!==Number(this.$route.query.selectTab)||t?1!==Number(this.$route.query.selectTab)||t||(a=this.selectData.code):i=this.selectData.code,s.manageCodeList=t?String(t.manageCode).split():i,s.centerIdList=a,s.siteIdList=[],s.sumDate=t?t.sumDate:s.sumDate,delete s.code,s.page=1,s.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(s)},onFocus:function(){this.$refs.selectSite.onClickSiteSelect()},onChangeSite:function(e,t){this.currentPage=1,this.codes=e.map((function(e){return e.label})).join(","),this.selectCode=e.map((function(e){return e.value})),this.downDistrictCode=[],this.downCenterCode=[];var s={manageCodeList:[],centerIdList:[],siteIdList:[]};if(e.length)this.codes=e.map((function(e){return e.label})).join(","),this.selectCode=e.map((function(e){return e.value})),1===this.tabActive?s.siteIdList=this.selectCode:2===this.tabActive&&0===e[0].type?s.manageCodeList=this.selectCode:2===this.tabActive&&1===e[0].type&&(s.centerIdList=this.selectCode);else{this.selectCode=[],"0"!==t[t.length-1].code?this.codes=t[t.length-1].label:this.codes="";var i=t[t.length-1].type;0===i?s.manageCodeList="0"===t[t.length-1].code?[]:t[t.length-1].code.split():1===i?s.centerIdList=t[t.length-1].code.split():3===i&&(s.siteIdList=t[t.length-1].code.split())}this.cacheParams={districtCode:s.manageCodeList,centerCode:s.centerIdList,siteCode:s.siteIdList},s.type=this.tabActive,s.sumDate=this.selectData.sumDate,s.page=1,s.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(s)},onChangeTime:function(){this.currentPage=1;var e=this.getParams();e.page=1,e.pageSize=this.pageSize,this.tableData=[],this.getBoardContributeList(e)},getBoardContributeList:function(e){var t,s;return v.a.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,v.a.awrap(Object(I["b"])(e));case 2:s=i.sent,(t=this.tableData).push.apply(t,Object(w["a"])(s.list)),this.total=s.total;case 5:case"end":return i.stop()}}),null,this,null,D.a)},updateData:function(e){this.currentPage++;var t=this.getParams();this.tableData.length<this.total&&this.getBoardContributeList(B({pageSize:this.pageSize,page:this.currentPage},t))},displayMore:function(e){this.currentPage=1,this.tableData=[];var t=this.getParams();this.getBoardContributeList(B({pageSize:this.pageSize,page:this.currentPage},t))}}},z=q,j=(s("81d8"),s("2877")),O=Object(j["a"])(z,o,n,!1,null,"0ac81813",null),_=O.exports,F={name:"siteContribution",components:{DetailPanel:_},data:function(){return{active:2,codes:"",tabList:[{tabName:"管区",type:2},{tabName:"网点",type:1}]}},computed:{tabs:function(){var e=this.$route.query.selectTab,t=this.$route.query.code,s=this.tabList;return 0===Number(e)&&"0"!==t?s=this.tabList.filter((function(e){return 2!==e.type})):1===Number(e)&&(s=this.tabList.filter((function(e){return 2!==e.type&&3!==e.type}))),s}},created:function(){this.active=this.getQueryType()},mounted:function(){},methods:{getQueryType:function(){var e=this.$route.query.code,t=Number(this.$route.query.selectTab),s=2;return(0===t&&"0"!==e||1===t)&&(s=1),s},onDownTab:function(e,t){this.active=e;var s=this.$refs["detailPanel"+e];s&&s[0].onRefresh(e,t)},onBeforeChangeTab:function(e){return!0},onChangeTab:function(e){var t=this.$refs["detailPanel"+e];t&&t[0].onParChangeTab(e)}}},E=F,R=(s("8ad7"),Object(j["a"])(E,i,a,!1,null,"66d9a269",null));t["default"]=R.exports},"8ad7":function(e,t,s){"use strict";var i=s("9ec5"),a=s.n(i);a.a},"9ec5":function(e,t,s){}}]);